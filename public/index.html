<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todo Harbor | 代办事项中心</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Space+Grotesk:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="bg-orb orb-1" aria-hidden="true"></div>
    <div class="bg-orb orb-2" aria-hidden="true"></div>

    <main class="shell">
      <header class="topbar">
        <div>
          <p class="eyebrow">Todo Harbor</p>
          <h1>你的代办事项港湾</h1>
          <p class="subtitle">自动保存历史待办与完成状态，刷新页面不会丢失。</p>
        </div>
        <span class="status-pill" id="syncStatus">已连接</span>
      </header>

      <section class="panel composer-panel" aria-label="创建待办">
        <div class="composer-head">
          <div>
            <p class="composer-kicker">新增任务</p>
            <h2>结构化录入区</h2>
            <p class="composer-note">支持单条创建、按日期批量创建、挂载父任务形成层级。</p>
          </div>
          <div class="compose-modes" role="tablist" aria-label="新增模式">
            <button class="compose-mode is-active" data-compose-mode="single" role="tab" aria-selected="true">
              单条录入
            </button>
            <button class="compose-mode" data-compose-mode="batch" role="tab" aria-selected="false">
              批量录入
            </button>
          </div>
        </div>

        <form id="todoForm" class="composer-form">
          <div class="composer-grid">
            <div class="composer-left">
              <label class="field" for="todoInput" id="singleInputField">
                <span>任务标题</span>
                <input
                  id="todoInput"
                  name="title"
                  type="text"
                  maxlength="200"
                  placeholder="比如：整理本周项目周报"
                  autocomplete="off"
                />
              </label>

              <label class="field is-hidden" for="todoBatchInput" id="batchInputField">
                <span>批量任务（每行一条）</span>
                <textarea
                  id="todoBatchInput"
                  name="titles"
                  rows="5"
                  placeholder="例如：&#10;完成接口联调&#10;补充回归测试&#10;更新发布文档"
                ></textarea>
                <small>批量模式会按当前项目、日期、父任务统一创建。</small>
              </label>

              <div class="composer-extra">
                <label class="field" for="projectInput">
                  <span>项目</span>
                  <input
                    id="projectInput"
                    name="project"
                    type="text"
                    maxlength="80"
                    list="projectSuggestions"
                    value="默认项目"
                    placeholder="如：订单中心"
                  />
                </label>

                <label class="field" for="dueDateInput">
                  <span>任务日期</span>
                  <input id="dueDateInput" name="dueDate" type="date" />
                </label>

                <label class="field" for="parentSelect">
                  <span>父任务</span>
                  <select id="parentSelect" name="parentId">
                    <option value="">顶级任务（无父级）</option>
                  </select>
                </label>
              </div>

              <div class="composer-helpers">
                <div class="quick-dates" aria-label="快捷日期">
                  <button type="button" class="quick-date" data-days-offset="0">今天</button>
                  <button type="button" class="quick-date" data-days-offset="1">明天</button>
                  <button type="button" class="quick-date" data-days-offset="7">一周后</button>
                  <button type="button" class="quick-date" data-clear-date="true">清除日期</button>
                </div>
                <div id="projectChips" class="project-chips" aria-label="历史项目快捷选择"></div>
              </div>
            </div>

            <aside class="composer-summary" aria-live="polite">
              <h3>创建预览</h3>
              <dl>
                <div><dt>模式</dt><dd id="summaryMode">单条录入</dd></div>
                <div><dt>预计创建</dt><dd id="summaryCount">1 条</dd></div>
                <div><dt>项目</dt><dd id="summaryProject">默认项目</dd></div>
                <div><dt>日期</dt><dd id="summaryDate">未设置日期</dd></div>
                <div><dt>父任务</dt><dd id="summaryParent">顶级任务</dd></div>
              </dl>
              <p id="summaryHint">单条模式会创建 1 条任务。</p>
            </aside>
          </div>

          <div class="composer-actions">
            <button type="submit" id="addButton">新增待办</button>
            <button type="button" id="resetComposerButton" class="secondary-button">清空输入</button>
          </div>
          <datalist id="projectSuggestions"></datalist>
        </form>
      </section>

      <section class="panel metrics-panel" aria-label="统计数据">
        <article class="metric-card">
          <p>全部</p>
          <strong id="countAll">0</strong>
        </article>
        <article class="metric-card">
          <p>进行中</p>
          <strong id="countActive">0</strong>
        </article>
        <article class="metric-card">
          <p>已完成</p>
          <strong id="countCompleted">0</strong>
        </article>
      </section>

      <section class="panel board-panel">
        <div class="board-toolbar">
          <div class="toolbar-controls">
            <div class="filters" role="tablist" aria-label="筛选代办">
              <button class="filter is-active" data-filter="all" role="tab" aria-selected="true">
                全部
              </button>
              <button class="filter" data-filter="active" role="tab" aria-selected="false">
                进行中
              </button>
              <button class="filter" data-filter="completed" role="tab" aria-selected="false">
                已完成
              </button>
            </div>
            <div class="view-modes" role="tablist" aria-label="视图模式">
              <button class="view-mode is-active" data-view="flat" role="tab" aria-selected="true">
                普通
              </button>
              <button class="view-mode" data-view="project" role="tab" aria-selected="false">
                按项目
              </button>
              <button class="view-mode" data-view="date" role="tab" aria-selected="false">
                按日期
              </button>
            </div>
            <div class="toolbar-actions">
              <button id="clearCompletedButton" class="danger-button" type="button">清除已完成</button>
            </div>
          </div>
          <p class="hint">可设置父任务做层级，或切换视图按项目/日期查看。</p>
        </div>

        <div id="messageBar" class="message" aria-live="polite"></div>
        <div id="todoList" class="todo-list" aria-label="代办事项列表"></div>
      </section>
    </main>

    <template id="todoTemplate">
      <article class="todo-item">
        <button class="toggle" type="button" aria-label="切换完成状态"></button>
        <div class="todo-content">
          <div class="todo-tags"></div>
          <p class="todo-title"></p>
          <p class="todo-meta"></p>
        </div>
      </article>
    </template>

    <script src="/app.js"></script>
  </body>
</html>
